{% extends '../../partials/base.html' %}


{% block elements %}

	<div class="grid-container u-padding-top-40 u-padding-bottom-20" style="position: relative;">
		{% if owner %}
		<span class="edit-collection">
			<a id="go-collection-modal" href="#edit-modal"><i class="bi_editorial-compose"></i></a>
		</span>
		{% endif %}

		<!-- <div class="grid-20">
			&nbsp;
		</div> -->
		<div class="grid-100">
			<div class="single-collection-header">
				<a href="/user/{{collection.User.username}}">
					<img src="{{collection.User.photo}}">
				</a>
				<div>
					<p class="am-navigation-text">{{collection.User.fullname}}</p>
					<p class="am-navigation-subtext">Coleccion > {{collection.name}}</p>
				</div>
			</div>
		</div>

		<div class="grid-100 u-margin-top-30">
			<p class="am-collection-desc">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
			tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
			quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
			consequat.</p>
		</div>
		<!-- <div class="grid-100">
			<p class="am-navigation-text">{{collection.User.firstname}} > Coleccion > {{collection.name}}</p>
		</div> -->
		<!-- <div class="grid-20 filter right">
			&nbsp;
			<div class="am-Select">
				ORDENAR &nbsp;&nbsp;<i class="fa fa-caret-down"></i>
			</div>
			<div class="right-menu u-padding-top-10">
				<div class="am-Filter">
					<div class="am-Filter-item">
						<p class="am-Filter-option">MÁS NUEVO</p>
					</div>
					<div class="am-Filter-item">
						<p class="am-Filter-option">MÁS VALORADO</p>
					</div>
					<div class="am-Filter-item">
						<p class="am-Filter-option">MÁS POPULAR</p>
					</div>
				</div>
			</div>
		</div> -->
	</div>

	<div class="grid-container">
		<gir class="grid-100">
			<div class="u-separator" style="margin: 0 10px"></div>
		</gir>
	</div>


	<div class="discover-content grid-container u-padding-top-10 u-padding-bottom-40">
		<div class="grid-100 grid-parent">
			<div class="grid work-layout-discover">
				<div class="grid-sizer"></div>
			</div>
		</div>
	</div>

	<div id="edit-modal" style="display: none;">
		<div class="am-upload-work-box grid-container">
			<p class="main-title">EDITAR COLECCION</p>
			<form class="add-work collection-form">
				<div class="grid-100">
					<div class="separator">
						<span class="line"></span><span class="line"></span>
					</div>
					<p class="title" style="min-width: 300px;">Nombre</p>
					<input name='name' value="{{collection.name}}" class="input" type="text" required placeholder="Ingrese el nombre de la coleccion"/>
				</div>

				<div class="grid-100 mobile-grid-100">
					<p class="title">Descripcion</p>
					<textarea name='description' class='input'placeholder="Descripcion" maxlength='140'>{{collection.description}}</textarea>

					<div class="switch u-margin-top-10">
						<p class="title">Público</p>
						<span class="value">On</span>

						<input type="checkbox" name="public" id="public" checked/>
						<label for="public">
						  <div class="am-Switch-button">
						  	<i class="fa fa-bars"></i>
						  </div>
						</label>
					</div>
				</div>

				<div class="u-padding-top-20">
					<div class="grid-50">
						<a href='#'>
							<button class="button" style="margin-top: 5px;" data-color="blue">GUARDAR</button>
							<button class="button" style="margin-top: 5px;" data-color="blue">
								<i class="load fa fa-spinner"></i>
							</button>
						</a>
					</div>
					<div class="grid-50">
			      <a href='#'>
			        <button class="button inline upload u-margin-top-30 upload_button" style="border: none; box-shadow: none;">
			          <i class="bi_editorial-trash-l"></i>&nbsp;&nbsp;&nbsp;ELIMINAR
			        </button>
			      </a>
					</div>
				</div>
			</form>
		</div>
	</div>

	<!-- <div id="edit-modal" style="display: none;">
		<div class="am-upload-work-box grid-container">
			<p class="main-title">EDITAR COLECCION</p>
			<form class="add-work">
				<div class="grid-100">
					<div class="separator">
						<span class="line"></span><span class="line"></span>
					</div>
					<p class="title">Nombre de la coleccion</p>
					<input name='name' value="" class="input" type="text" required placeholder="Ingrese el nombre de la coleccion"/>
				</div>

				<div class="grid-100 mobile-grid-100">
					<p class="title">Descripcion de la coleccion</p>
					<textarea name='description' required class='input'placeholder="Descripcion" maxlength='140'>{{work.description}}</textarea>
				</div>

				<div class="u-padding-top-20">
					<div class="grid-50">
						<a href='#'>
							<button class="button" style="margin-top: 5px;" data-color="blue">GUARDAR</button>
						</a>
					</div>
					<div class="grid-50">
			      <a href='#'>
			        <button class="button inline upload u-margin-top-30 upload_button" style="border: none; box-shadow: none;">
			          <i class="bi_editorial-trash-l"></i>&nbsp;&nbsp;&nbsp;ELIMINAR
			        </button>
			      </a>
					</div>
				</div>
			</form>
		</div>
	</div> -->



	{% endblock %}

	{% block scripts %}
	<script type="text/javascript">
	var collection = {{collection|safe|json}};
		$(document).ready(function() {
			var data= {
				pagination: {
					page:1,
					pages:2
				},
				items: {{works|json|safe}}
			}
			new APP.Viewer('work', $('.grid'), 'infinite', data);
		});

	$("#go-collection-modal").leanModal();

	$('.collection-form').submit(function() {
		event.preventDefault();
	  $('.submit').hide();
	  $('.submit-loading').show();
	  //var url =  '/auth/' + this.meta;
		var payload = {
			name: $('input[name=name]').val(),
			description: $('textarea[name=description]').val(),
			public: $( "input[name=public]:checked" ).val() !== undefined,
			idCollection: collection.id
		}
	  $.post(DataApp.currentUser.url + '/collection/update' , payload, function(response){
			console.log(response);
			// if (response.status === 200) {
			// 	$('.am-navigation-text').text($('.'))
			// }
		});
	});

	</script>
	{% endblock %}
