{% extends '../partials/base.html' %}

{% block styles %}
    <link rel="stylesheet" href="//cdn.jsdelivr.net/medium-editor/latest/css/medium-editor.min.css">
    <link rel="stylesheet" href="/default.css">
    <link rel="stylesheet" href="/medium-editor-insert-plugin.css">
{% endblock %}


{% block elements %}
{% if edit %}
Edicion
{% endif %}
    <p>
        estado : <span class="status">Inicio</span>
    </p>

    <div class="uploader-work">
      <div class="profile-imgage">
        <div class="preview">
          {% if edit %}
            <img src="{{post.photo|addFilter('w_300,c_limit')}}"/>
          {% endif %}
        </div>
      </div>
      <div class="preload hide"><i class="fa fa-spinner"></i></div>
      <button class="button upload u-margin-top-30">BUSCAR ARCHIVO</button>
    </div>
    <div class="image-uploader" style="position:relative;">
        {{ cloudinary.uploader.image_upload_tag('cover', {callback: cloudinary_cors, return_delete_token: true, html: {
        style: "width:230px;height:55px;top:-70px;left: 105px;", class:'editor-cover' } })}}
    </div>

</br>

    <select class="input select" name='category'>
      <option disabled selected>Selecciona una Categoria</option>
      {% for category in categories %}
        <option value="{{category.id}}">{{category.name}}</option>
      {% endfor %}
    </select>
    </br>

    {% if edit %}
      <input type="text" name="name" placeholder="Titulo del post" value="{{post.name}}">
    {% else %}
      <input type="text" name="name" placeholder="Titulo del post">
    {% endif %}

    <div id="container">
        {{ cloudinary.uploader.image_upload_tag('photo', {callback: cloudinary_cors, return_delete_token: true, html: {
        style: "width:230px;height:55px;top:-70px;left: 105px;", multiple:1, class:'editor-photos' } })}}
        <div class="editable">
            {% if edit %}
              {{postBody|safe}}
            {% endif %}
        </div>
    </div>
{% endblock %}


{% block scripts %}
    <script src="http://linkesch.com/medium-editor-insert-plugin/bower_components/handlebars/handlebars.runtime.min.js"></script>
    <script src="http://linkesch.com/medium-editor-insert-plugin/bower_components/jquery-sortable/source/js/jquery-sortable-min.js"></script>

    <script src="/medium-editor.js"></script>
    <script src="/medium-editor-insert-plugin.js"></script>
    <script>
      var post = null;
      var edit = {{edit}};
      if(edit) post = {{post|json|safe}};
      $(function () {
          $.cloudinary.config({{cloudinary.config()|json|safe}});
          new APP.CreatorPostScreen();
      });
    </script>
{% endblock %}
