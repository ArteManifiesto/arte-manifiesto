<!DOCTYPE html>
<html>
<head>

	<title>Arte Manifiesto | Obras</title>
	
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link href='http://fonts.googleapis.com/css?family=Ubuntu:300,400,500,700|Roboto+Condensed:400,300,700|Raleway:400,100,200,300,500,700,600,800,900|Oswald:400,300,700|Hammersmith+One' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

	<link rel="stylesheet" type="text/css" href="/css/discover-works.css">

</head>
<body>

	<!-- ********************************************************************
		$ HEADER
	********************************************************************* -->
	<!-- <header class="header">
		<a class="logo" href="/">
			<img class="logo__small" src="/img/logo-small.png">
			<img class="logo__normal" src="/img/logo.png">
		</a>
		<nav class="skinny-menu" data-icon='true'>
			<a class="skinny-menu__item" href="/works/category/all/page-1">
				<i class="skinny-menu__item__icon fa fa-paint-brush"></i>
				<span class="skinny-menu__item__text">Obras</span>
			</a>
			<a class="skinny-menu__item" href="/users/specialty/all/page-1">
				<i class="skinny-menu__item__icon fa fa-heart-o"></i>
				<span class="skinny-menu__item__text">Artistas</span>
			</a>
			<a class="skinny-menu__item active" href="/products/type/all/page-1/">
				<i class="skinny-menu__item__icon fa fa-diamond"></i>
				<span class="skinny-menu__item__text">Market</span>
			</a>
			<a class="skinny-menu__item js-signInButton">
				<i class="skinny-menu__item__icon fa fa-user"></i>
				<span class="skinny-menu__item__text">Sign in</span>
			</a>
		</nav>
	</header> -->
	<header class="header">
		<a class="logo" href="/">
			<img class="logo__small" src="/img/logo-small.png">
			<img class="logo__normal" src="/img/logo.png">
		</a>
		<nav class="skinny-menu" data-icon='true'>
			<a class="skinny-menu__item active" href="/works/category/all/page-1">
				<i class="skinny-menu__item__icon fa fa-paint-brush"></i>
				<span class="skinny-menu__item__text">Obras</span>
			</a>
			<a class="skinny-menu__item" href="/users/specialty/all/page-1">
				<i class="skinny-menu__item__icon fa fa-heart-o"></i>
				<span class="skinny-menu__item__text">Artistas</span>
			</a>
			<a class="skinny-menu__item" href="/products/type/all/page-1/">
				<i class="skinny-menu__item__icon fa fa-diamond"></i>
				<span class="skinny-menu__item__text">Market</span>
			</a>
			<a class="skinny-menu__item js-signInButton">
				<i class="skinny-menu__item__icon fa fa-user"></i>
				<span class="skinny-menu__item__text">Sign in</span>
			</a>
		</nav>
	</header>


	<!-- ********************************************************************
		$ SLOGAN
	********************************************************************* -->
	<section class="slogan">
		<span class="slogan-text">Descubre Geniales Diseños en Increibles Productos</span>
		<button class="button-solid js-signUpButton" data-size='large'>Sign Up</button>
	</section>


	<!-- ********************************************************************
		$ FILTERS MENU
	********************************************************************* -->
	<section class="filters-menu">
		<div class="filters-menu__search">
			<div class="search">
				<input type="text" placeholder="Busca Obras, Artistas y Productos">
				<i class="fa fa-search"></i>
			</div>
		</div>
		<div class="filters-menu__category js-leftFiltersButton">
			<button class="button-filter js-leftFiltersButton"><i class="fa fa-caret-left"></i> &nbsp Categorías</button>
		</div>
		<div class="filters-menu__order js-rightFiltersButton">
			<button class="button-filter js-rightFiltersButton">Ordenar &nbsp <i class="fa fa-caret-right"></i></button>
		</div>
	</section>


	<!-- ********************************************************************
		$ WORKS CONTAINER
	********************************************************************* -->
	<div class="works-container">
		<div class="works-container__filters left js-leftFilters">
			<div class="filters">
				<div class="filters__title">Categorías</div>
				{% for category in categories %}
					<div class="filter js-category" data-value="{{ category.nameSlugify }}">{{ category.name }}</div>
				{% endfor %}
	<!-- <div class="filter js-category" data-value="holi!">Dibujo</div>
				<div class="filter js-category" data-value="holi!">Ilustración</div>
				<div class="filter js-category" data-value="holi!">Pintura</div>
				<div class="filter js-category" data-value="holi!">Arte</div>
				<div class="filter js-category" data-value="holi!">Fotografía</div>
				<div class="filter js-category" data-value="holi!">Escultura</div>
				<div class="filter js-category" data-value="holi!">Instalación</div>
				<div class="filter js-category" data-value="holi!">Técnica Mixta</div>
				<div class="filter js-category" data-value="holi!">Grabado</div> -->
			</div>
		</div>
		<div class="works-container__filters right js-rightFilters">
			<div class="filters">
				<div class="filters__title">Orden</div>
				<div class="filter js-order" data-value="popularity">Más popular</div>
				<div class="filter js-order" data-value="views">Más visto</div>
				<div class="filter js-order" data-value="newest">Más reciente</div>
			</div>
			<div class="filters">
				<div class="filters__title">Tiempo</div>
				<div class="filter js-time" data-value="day">Día</div>
				<div class="filter js-time" data-value="week">Semana</div>
				<div class="filter js-time" data-value="month">Mes</div>
				<div class="filter js-time" data-value="year">Año</div>
			</div>
		</div>
		<div class="works-container__works js-works">
			<!-- ********************************************************************
				$ WORKS
			********************************************************************* -->
			<section class="works" data-columns>
				{% for work in works %}
					<a href="#" class="work">
						<img src="{{work.photo}}">
					</a>
				{% endfor %}
			<!-- 
				<a href="#" class="work">
					<img src="/img/works/obra1.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra2.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra3.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra4.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra5.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra6.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra7.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra8.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra9.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra10.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra11.jpg">
				</a>
				<a href="#" class="work">
					<img src="/img/works/obra12.jpg">
				</a>
			 -->
			</section>
		</div>
	</div>


	<!-- ********************************************************************
		$ MORE
	********************************************************************* -->
	<div class="more">
		<button class="button-solid js-moreButton" data-size='small' data-color='red'>Ver más</button>
	</div>


	<!-- ********************************************************************
		$ SLOGAN
	********************************************************************* -->
	<section class="slogan">
		<span class="slogan-text">Muestra tu talento artístico!</span>
		<button class="button-solid js-signUpButton" data-size='large'>Sign Up</button>
		<!-- <button class="button-solid js-signUpButton" data-size='large'>Regístrate</button> -->
	</section>


	<!-- ********************************************************************
		$ FOOTER
	********************************************************************* -->
	<div class="footer-container">
		<footer class="footer">
			<div class="footer__logo">
				<a class="logo" href="#">
					<img class="logo__small" src="/img/logo-small-white.png">
					<img class="logo__normal" src="/img/logo-white.png">
				</a>
			</div>
			<div class="footer__sections">
				<div class="footer__section copyright">
					<p class="skinny-text" data-size='small' data-color='light'>COPYRIGHT © 2015 - ALL RIGHTS RESERVED.</p>
				</div>
				<div class="footer__section links">
					<p class="medium-text">Blog</p>
					<p class="medium-text">Terminos</p>
					<p class="medium-text">Condiciones</p>
				</div>
				<div class="footer__section social">
					<i class="fa fa-facebook"></i>
					<i class="fa fa-twitter"></i>
					<i class="fa fa-google-plus"></i>
				</div>			
			</div>
		</footer>
	</div>


	<!-- ********************************************************************
		$ LOGIN
	********************************************************************* -->
	<section class="login-modal">
		<div class="login-box js-loginBox">
			<header class="login-box__header">			
				<div class="skinny-menu">
					<a href="#" class="skinny-menu__item js-signInFormButton">
						Ingresar
					</a>
					<a href="#" class="skinny-menu__item js-signUpFormButton">
						Registrarme
					</a>
				</div>
			</header>
			<form class="login-box__form js-signUpForm">
		 		<a href="#" class="facebook-button" data-expand='true'>
					<i class="fa fa-facebook-official"></i>&nbsp; Registrarme con Facebook
				</a>
				<div class="separator-text">
					<span class="line"></span>
					<span class="text">Con email</span>
					<span class="line"></span>
				</div>
				<input class="input" data-size='large' name="username" placeholder="Username" type="text">
				<input class="input" data-size='large' name="email" placeholder="Email" type="email">
				<input class="input" data-size='large' name="password" placeholder="Password" type="password">
				<input class="input" data-size='large' name="first-name" placeholder="First Name" type="text">
				<input class="input" data-size='large' name="last-name" placeholder="Last Name" type="text">
				<select class="input" name="gender">
					<option selected disabled>Género</option>
					<option value="Male">Masculino</option>
					<option value="Female">Femenino</option>
				</select>
				<div class="question">
					<input name="question" type="checkbox" id="question">
					<label for="question" class="medium-text">¿Eres Artista profesional?</label>
				</div>
				<input class="button-solid" data-size='large' data-color='red' data-expand='true' value="Registrarme" type="submit">
				<p class="high-text note" data-size="small">Al registrarte estas aceptando los <strong>terminos y condiciones</strong> de Arte Manifiesto</p>
			</form>
			<form class="login-box__form js-signInForm">
		 		<a href="#" class="facebook-button" data-expand='true'>
					<i class="fa fa-facebook-official"></i>&nbsp; Ingresar con Facebook
				</a>
				<div class="separator-text">
					<span class="line"></span>
					<span class="text">Con email</span>
					<span class="line"></span>
				</div>
				<input class="input" data-size='large' name="email" placeholder="Email" type="text">
				<input class="input" data-size='large' name="password" placeholder="Password" type="password">
				<input class="button-solid" data-size='large' data-color='red' data-expand='true' value="Ingresar" type="submit">
				<p class="high-text note js-rememberFormButton" data-size="small">Recordar contraseña</p>
			</form>
			<form class="login-box__form js-rememberForm">
				<div class="separator-text">
					<span class="line"></span>
					<span class="text">Recordar contraseña</span>
					<span class="line"></span>
				</div>
				<input class="input" data-size='large' name="email" placeholder="Email" type="text">
				<input class="button-solid" data-size='large' data-color='red' data-expand='true' value="Recordar" type="submit">
				<p class="high-text note js-rememberBackButton" data-size="small">Ingresar</p>
			</form>
			<div class="login-box__closed js-loginClosed"><i class="fa fa-times"></i></div>
		</div>
	</section>


	<script type="text/template" id="work-template">
		<a href="#" class="work">
			<img src="<%= photo %>">
		</a>
	</script>

	<script>

		pagination = {{ pagination|json|safe }};
		console.log('pagination: ', pagination)

		var user = {{ user|json|safe }};
		console.log('user: ', user)

		// var works = {{ works|json|safe }};
		// // console.log('works: ', works)

		// var categories = {{ categories|json|safe }};
		// // console.log('categories: ', categories)

		var url = {{ url|json|safe }};
		console.log('url: ', url)

	</script>

	<script src="/js/vendor/jquery.min.js"></script>
	<script src="/js/vendor/salvattore.js"></script>
	<script src="/js/vendor/underscore-min.js"></script>

	<script src="/js/lib/login.js"></script>
	<script src="/js/lib/filters.js"></script>
	<script src="/js/discover-works.js"></script>


<<<<<<< Updated upstream
=======
<h3>categories</h3>
<ul class="categoriesContainer">
</ul>

<h3>ordenar por</h3>
<ul class="orderContainer">
</ul>

<h3>tiempo</h3>
<ul class="timeContainer">
</ul>


<h3>works</h3>

{% if works.length > 0 %}
    <ul>
        {% for work in works %}
            <div style="margin: 10px;width: 200px;">
                <li>{{ work.id }} - {{ work.name }}</li>
                <img class="rounded" src="{{ work.photo }}"><br/>


                {% if work.owner %}
                    <span><strong>owner</strong></span>
                {% endif %}
                {% if work.viewed %}
                    <span style="color: #5794db"><strong><em>viewed</em></strong></span>
                {% endif %}

                <p>
                    likes <span class="likes">{{ work.likes }}</span>
                    <span>views {{ work.views }}</span>
                    <span>collects {{ work.collects }}</span>
                    <br/>
                        <span class="featuredlogo"
                                {% if work.featured %}
                                    style="display: block;"
                                {% else %}
                                    style="display: none;"
                                {% endif %}
                                >producto destacado</span>
                </p>

                <p>{{ work.User.firstname }}</p>
                <br/>



                {% if work.liked %}
                    <button id="{{ work.id }}" class="unlike">Unlike</button>
                {% else %}
                    <button id="{{ work.id }}" class="like">Like</button>
                {% endif %}

                <button id="{{ work.id }}" class="collect">Collect</button>
                {% if work.featured %}
                    <button id="{{ work.id }}" class="unfeatured">Unfeatured</button>
                {% else %}
                    <button id="{{ work.id }}" class="featured">Featured</button>
                {% endif %}
            </div>
        {% endfor %}
    </ul>
{% else %}
    <p>no hay obras para <strong>{{ currentCategory }}</strong></p>
{% endif %}

<ul class="pagination">

</ul>
<script src="/js/vendor/jquery.min.js"></script>
<script>
    var pagination = {{ pagination|json|safe }};
    console.log('pagination: ', pagination)
    
    var user = {{ user|json|safe }};
    console.log('user: ', user)
    
    var works = {{ works|json|safe }};
    console.log('works: ', works)

    var categories = {{ categories|json|safe }};
    console.log('categories: ', categories)
    
    var url = {{ url|json|safe }};
    console.log('url: ', url)

    console.log(pagination);
    categories.push({name: 'all', nameSlugify: 'all'});

    window.history.pushState({}, "", url);
    var categoriesContainer = $('.categoriesContainer');

    var href = location.href.split('/');
    for (var i = 0; i < categories.length; i++) {
        var category = categories[i];
        href[5] = category.nameSlugify;
        var p = $('<span style="padding-right: 20px;">');
        var a = $('<a>', {
            href: href.join('/').replace('page-' + pagination.page, 'page-1')
        }).html(category.name);
        p.append(a);
        categoriesContainer.append(p);
    }


    var index = location.href.indexOf('&');

    function getUrlParameter(sParam) {
        var sPageURL = window.location.search.substring(1);
        var sURLVariables = sPageURL.split('&');
        for (var i = 0; i < sURLVariables.length; i++) {
            var sParameterName = sURLVariables[i].split('=');
            if (sParameterName[0] == sParam) {
                return sParameterName[1];
            }
        }
    }
    var order = getUrlParameter('order');

    var orders = ['popularity', 'views', 'newest'];

    if (order != undefined) {
        for (var i = 0; i < orders.length; i++) {
            var od = orders[i];
            var p = $('<span style="padding-right: 20px;">');
            var a = $('<a>', {
                href: location.href.replace(order, od)
            }).html(od);
            p.append(a);
            $('.orderContainer').append(p);
        }
    }
    var time = getUrlParameter('time');

    var times = ['day', 'week', 'month', 'year'];

    if (time != undefined) {
        for (var i = 0; i < times.length; i++) {
            var od = times[i];
            var p = $('<span style="padding-right: 20px;">');
            var a = $('<a>', {
                href: location.href.replace(time, od)
            }).html(od);
            p.append(a);
            $('.timeContainer').append(p);
        }
    } else {
        for (var i = 0; i < times.length; i++) {
            var od = times[i];
            var p = $('<span style="padding-right: 20px;">');
            var a = $('<a>', {
                href: location.href + "&time=" + od
            }).html(od);
            p.append(a);
            $('.timeContainer').append(p);
        }
    }

    for (var i = 0; i < pagination.pages; i++) {
        console.log('lel');
        $('.pagination').append($('<a>', {
            href: location.href.replace('page-' + pagination.page, 'page-' + (i + 1))
        }).html(String(i + 1 + "")));
    }
    $(function () {
        var works = {{ works|json|safe }}
                console.log(works);

        $(document).on("click", ".like", function (event) {
            if (user.length < 1)
                return alert('necesitas logearte');
            
            var scope = $(this);
            $.ajax({
                type: "POST",
                url: "/user/like/",
                data: {idWork: scope.attr('id')},
                success: function (data) {
                    if (data.code == 202) {
                        scope.text('Unlike');
                        var likes = scope.parent().find('.likes');
                        var numLikes = parseInt(likes.text(), 10);
                        likes.text(++numLikes);
                        scope.removeClass('like').addClass('unlike');
                    }
                    console.log(data);
                }
            });
            return false;
        });

        $(document).on("click", ".featured", function (event) {
            var scope = $(this);
            $.ajax({
                type: "POST",
                url: "/user/work/featured/",
                data: {idWork: scope.attr('id')},
                success: function (data) {
                    if (data.code == 202) {
                        scope.parent().find('.featuredlogo').show();
                        scope.text('Unfeatured');
                        scope.removeClass('featured').addClass('unfeatured');
                    }
                    console.log(data);
                }
            });
            return false;
        });
        $(document).on("click", ".unfeatured", function (event) {
            var scope = $(this);
            $.ajax({
                type: "POST",
                url: "/user/work/unfeatured/",
                data: {idWork: scope.attr('id')},
                success: function (data) {
                    if (data.code == 202) {
                        scope.parent().find('.featuredlogo').hide();
                        scope.text('Featured');
                        scope.removeClass('unfeatured').addClass('featured');
                    }
                    console.log(data);
                }
            });
            return false;
        });

        $(document).on("click", ".unlike", function (event) {
            var scope = $(this);
            $.ajax({
                type: "POST",
                url: "/user/unlike/",
                data: {idWork: scope.attr('id')},
                success: function (data) {
                    if (data.code == 202) {
                        var likes = scope.parent().find('.likes');
                        var numLikes = parseInt(likes.text(), 10);
                        likes.text(--numLikes);

                        scope.text('Like');
                        scope.removeClass('unlike').addClass('like');
                    }
                    console.log(data);
                }
            });
            return false;
        });

        $(document).on("click", ".collect", function (event) {
            alert('collect');
            return false;
            var scope = $(this);
            $.ajax({
                type: "POST",
                url: "/user/collects/",
                data: {meta: 'works'},
                success: function (data) {
                }
            });
            return false;
        });
    });

</script>
>>>>>>> Stashed changes
</body>
</html>

	<!-- <script type="text/template" id="work-template">
		// <a href="#" class="work">
		// 	<img src="<%= photo %>">
		// </a>
	</script>

	<script>

		// window.pagination = {{ pagination|json|safe }};
		// // console.log('pagination: ', pagination)

		// var user = {{ user|json|safe }};
		// // console.log('user: ', user)

		// var works = {{ works|json|safe }};
		// // console.log('works: ', works)

		// var categories = {{ categories|json|safe }};
		// // console.log('categories: ', categories)

		// window.url = {{ url|json|safe }};
		// // console.log('url: ', url)

	</script> -->

	<!-- // <script src="/js/discover-works.js"></script> -->

<!-- 	// <script src="/js/vendor/salvattore.js"></script>
	// <script src="/js/vendor/jquery.min.js"></script>
	// <script src="/js/vendor/underscore-min.js"></script>

	// <script src="/js/lib/filters.js"></script>
 -->

<!-- <div class="categorie js-category" data-value="holi!">Dibujo</div>
<div class="categorie js-category" data-value="holi!">Ilustración</div>
<div class="categorie js-category" data-value="holi!">Pintura</div>
<div class="categorie js-category selected" data-value="holi!">Arte</div>
<div class="categorie js-category" data-value="holi!">Fotografía</div>
<div class="categorie js-category" data-value="holi!">Escultura</div>
<div class="categorie js-category" data-value="holi!">Instalación</div>
<div class="categorie js-category" data-value="holi!">Técnica Mixta</div>
<div class="categorie js-category" data-value="holi!">Grabado</div> -->

	<!-- {% include "../partial/header.html"%} -->

<!-- 	{% if !user %}
		<section class="slogan">
			<span class="slogan-text">Descubre Geniales Diseños en Increibles Productos</span>
			<button class="button-solid js-signUpButton" data-size='large'>Sign Up</button>
		</section>
	{% endif %} -->


	<!-- <section class="category-menu">
		<div class="thick-menu">
			<a href="#" class="thick-menu__item">Descubrir Artistas</a>
			<a href="#" class="thick-menu__item">Descubrir Obras</a>
		</div>
	</section> -->


		<!-- <section class="filters-menu">
		<div class="filters-menu__search">
			<div class="search">
				<input type="text" placeholder="Busca Obras, Artistas y Productos">
				<i class="fa fa-search"></i>
			</div>
		</div>
		<div class="filters-menu__category js-leftFiltersButton">
			<button class="button-filter"><i class="fa fa-caret-left"></i> &nbsp Categoría</button>
		</div>
		<div class="filters-menu__order js-rightFiltersButton">
			<button class="button-filter">Ordenar &nbsp <i class="fa fa-caret-right"></i></button>
		</div>
	</section> -->

	<!-- <section class="works-container">
		<div class="works-container__left-filters js-leftFilters">
			<div class="filters">
				<div class="filters__title">
					<p class="" data-size=''>Categoria</p>
				</div>
				{% for category in categories %}
					<div class="filter js-category" data-value="{{ category.nameSlugify }}">{{ category.name }}</div>
				{% endfor %}
			</div>
		</div>
		<div class="works-container__works">
			<div class="works" data-columns>
				{% for work in works %}
					<a href="#" class="work">
						<img src="{{work.photo}}">
					</a>
				{% endfor %}
			</div>
			<div class="more-works">
				<button class="button-solid js-moreButton" data-size='small' data-color='red'>Ver mas</button>
			</div>
		</div>
		<div class="works-container__right-filters js-rightFilters">
			<div class="filters">
				<div class="filters__title">Orden</div>
				<div class="filter js-order" data-value="popularity">Más popular</div>
				<div class="filter js-order" data-value="views">Más visto</div>
				<div class="filter js-order" data-value="newest">Más reciente</div>
			</div>
			<div class="filters">
				<div class="filters__title">Tiempo</div>
				<div class="filter js-time" data-value="day">Día</div>
				<div class="filter js-time" data-value="week">Semana</div>
				<div class="filter js-time" data-value="month">Mes</div>
				<div class="filter js-time" data-value="year">Año</div>
			</div>
		</div>
	</section> -->